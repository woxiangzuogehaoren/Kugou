var KgMobileCall={ver:"2.2",debug:0,isAndroid:"undefined"==typeof external?!1:"undefined"==typeof external.superCall?!1:!0,isIOS:navigator.userAgent.match(/KGBrowser/gi)?!0:!1,chkAndroidApp:function(){try{if(external.superCall(122))return!0}catch(a){return!1}},cbNum:0,formatURL:{browser:"",url:""},formatSong:{filename:"",filesize:"",hash:"",bitrate:"",extname:"",duration:"",mvhash:"",m4afilesize:"","320hash":"","320filesize":"",sqhash:"",sqfilesize:0,feetype:0,isfirst:0},formatMV:{filename:"",singername:"",hash:"",imgurl:""},formatShare:{shareName:"",topicName:"",hash:"",listID:"",type:"",suid:"",slid:"",imgUrl:"",filename:"",duration:"",shareData:{linkUrl:"",picUrl:"",content:"",title:""}},_extend:function(a,b){if(b)for(var d in a)b.hasOwnProperty(d)||(b[d]=a[d]);return b},str2Json:function(a){var b={};if("[object String]"===Object.prototype.toString.call(a))try{b=JSON.parse(a)}catch(c){b={}}return b},json2Str:function(a){var b="";if("string"!=typeof a)try{b=JSON.stringify(a)}catch(c){b=""}return b},callCmd:function(a){var d,b=this,c="",e=document;if(e.getElementById("mod_debugwin_set")&&(e.getElementById("mod_debugwin_set").innerHTML=JSON.stringify(a).replace(/\\/g,"")),b.debug>0)switch(b.debug){case 1:window.console&&console.log(a);break;case 2:alert(JSON.stringify(a).replace(/\\/g,""))}if(b.chkAndroidApp())try{d=a.jsonStr?external.superCall(a.cmd,a.jsonStr):external.superCall(a.cmd),a.callback&&""!==a.callback&&(d=b.str2Json(d),a.callback(d))}catch(f){}else b.isIOS?(a.callback?(b.cbNum++,cbName="kgmobilecall"+b.cbNum+Math.random().toString().substr(2,9),window[cbName]=function(c){"undefined"!=typeof c&&a.callback&&("[object String]"===Object.prototype.toString.call(c)?a.callback(b.str2Json(c)):a.callback(c))},c=a.jsonStr?'kugouurl://start.music/?{"cmd":'+a.cmd+', "jsonStr":'+a.jsonStr+', "callback":"'+cbName+'"}':'kugouurl://start.music/?{"cmd":'+a.cmd+', "callback":"'+cbName+'"}'):c=a.jsonStr?'kugouurl://start.music/?{"cmd":'+a.cmd+', "jsonStr":'+a.jsonStr+"}":'kugouurl://start.music/?{"cmd":'+a.cmd+"}",location.href=c):a.callback&&a.callback({status:0,error:"不在客户端内"})},getUserInfo:function(a){var b=this;a?b.callCmd({cmd:101,callback:a}):b.callCmd({cmd:101})},callSoftUserLogin:function(a,b){var c=this,d="";a?(a.loginType||(a.loginType=""),d=c.json2Str(a),b?c.callCmd({cmd:102,jsonStr:d,callback:b}):c.callCmd({cmd:102,jsonStr:d})):b?c.callCmd({cmd:102,callback:b}):c.callCmd({cmd:102})},showRegisterBox:function(a,b){var c=this,d="";a?(d=c.json2Str(a),b?c.callCmd({cmd:103,jsonStr:d,callback:b}):c.callCmd({cmd:103,jsonStr:d})):b?c.callCmd({cmd:103,callback:b}):c.callCmd({cmd:103})},logout:function(a){var b=this;a?b.callCmd({cmd:104,callback:a}):b.callCmd({cmd:104})},downNoPlay:function(a,b){var g,h,c=this,d=[],e=[],f="";if(a){if(d=a.info,"[object Array]"===Object.prototype.toString.call(d))for(g=0,h=d.length;h>g;g++)e.push(c._extend(c.formatSong,d[g]));a.info=e,a.total||(a.total=a.info.length),a.className||(a.className=""),f=c.json2Str(a),b?c.callCmd({cmd:107,jsonStr:f,callback:b}):c.callCmd({cmd:107,jsonStr:f})}},listen:function(a,b){var g,h,c=this,d=[],e=[],f="";if(a){if(d=a.info,"[object Array]"===Object.prototype.toString.call(d))for(g=0,h=d.length;h>g;g++)e.push(c._extend(c.formatSong,d[g]));a.info=e,a.total||(a.total=a.info.length),a.className||(a.className=""),a.playIndex||(a.playIndex=0),a.isJump||(a.isJump=0),a.effect||(a.effect=0),f=c.json2Str(a),b?c.callCmd({cmd:108,jsonStr:f,callback:b}):c.callCmd({cmd:108,jsonStr:f})}},createList:function(a,b){var g,h,c=this,d=[],e=[],f="";if(a){if(d=a.info,"[object Array]"===Object.prototype.toString.call(d))for(g=0,h=d.length;h>g;g++)e.push(c._extend(c.formatSong,d[g]));a.info=e,a.total||(a.total=a.info.length),a.className||(a.className=""),f=c.json2Str(a),b?c.callCmd({cmd:109,jsonStr:f,callback:b}):c.callCmd({cmd:109,jsonStr:f})}},addNoDown:function(a,b){var g,h,c=this,d=[],e=[],f="";if(a){if(d=a.info,"[object Array]"===Object.prototype.toString.call(d))for(g=0,h=d.length;h>g;g++)e.push(c._extend(c.formatSong,d[g]));a.info=e,a.total||(a.total=a.info.length),a.className||(a.className=""),f=c.json2Str(a),b?c.callCmd({cmd:110,jsonStr:f,callback:b}):c.callCmd({cmd:110,jsonStr:f})}},spots:function(a,b){var g,h,c=this,d=[],e=[],f="";if(a){if(d=a.info,"[object Array]"===Object.prototype.toString.call(d))for(g=0,h=d.length;h>g;g++)e.push(c._extend(c.formatSong,d[g]));a.info=e,a.total||(a.total=a.info.length),a.className||(a.className=""),f=c.json2Str(a),b?c.callCmd({cmd:111,jsonStr:f,callback:b}):c.callCmd({cmd:111,jsonStr:f})}},createListDownAndPlaySong:function(a,b){var g,h,c=this,d=[],e=[],f="";if(a){if(d=a.info,"[object Array]"===Object.prototype.toString.call(d))for(g=0,h=d.length;h>g;g++)e.push(c._extend(c.formatSong,d[g]));a.info=e,a.total||(a.total=a.info.length),a.className||(a.className=""),f=c.json2Str(a),b?c.callCmd({cmd:112,jsonStr:f,callback:b}):c.callCmd({cmd:112,jsonStr:f})}},createListDownNoPlaySong:function(a,b){var g,h,c=this,d=[],e=[],f="";if(a){if(d=a.info,"[object Array]"===Object.prototype.toString.call(d))for(g=0,h=d.length;h>g;g++)e.push(c._extend(c.formatSong,d[g]));a.info=e,f=c.json2Str(a),b?c.callCmd({cmd:113,jsonStr:f}):c.callCmd({cmd:113,jsonStr:f,callback:b})}},createCollectListAddSong:function(a,b){var g,h,c=this,d=[],e=[],f="";if(a){if(d=a.info,"[object Array]"===Object.prototype.toString.call(d))for(g=0,h=d.length;h>g;g++)e.push(c._extend(c.formatSong,d[g]));a.info=e,a.total||(a.total=a.info.length),a.className||(a.className=""),f=c.json2Str(a),b?c.callCmd({cmd:114,jsonStr:f,callback:b}):c.callCmd({cmd:114,jsonStr:f})}},share:function(a,b,c,d){var e=this,g={},h=navigator.userAgent,i=function(){var b={title:encodeURIComponent(a.shareData.title)||"",url:a.shareData.linkUrl||"",content:encodeURIComponent(a.shareData.content)||"",imgSrc:encodeURI(a.shareData.picUrl)||"",swf:"",appkey:"340086183",ralateUid:""},c="",d="";c="http://service.t.sina.com.cn/share/share.php",d=["url="+b.url,"appkey="+b.appkey,"title="+b.content,"pic="+b.imgSrc,"ralateUid="+b.ralateUid].join("&"),location.href=c+"?"+d};a&&(g=e._extend(e.formatShare,a),a=g),e.isIOS?b?e.callCmd({cmd:115,jsonStr:e.json2Str(a),callback:b}):e.callCmd({cmd:115,jsonStr:e.json2Str(a)}):e.chkAndroidApp()?e.getVersion(function(b){b&&a&&3==a.type&&"android"==b.platform&&Number(b.version)<6340?i():e.callCmd({cmd:115,jsonStr:e.json2Str(a)})}):h.match("MicroMessenger")?c?c():i():d?d():i()},openSearch:function(a,b){var c=this,d="";a?(d=c.json2Str(a),b?c.callCmd({cmd:116,jsonStr:d,callback:b}):c.callCmd({cmd:116,jsonStr:d})):c.callCmd({cmd:116})},playMV:function(a,b){var g,h,c=this,d=[],e=[],f="";if(a){if(d=a.info,"[object Array]"===Object.prototype.toString.call(d))for(g=0,h=d.length;h>g;g++)e.push(c._extend(c.formatMV,d[g]));f=c.json2Str(a),b?c.callCmd({cmd:117,jsonStr:f,callback:b}):c.callCmd({cmd:117,jsonStr:f})}},playRadio:function(a,b){var c=this,d="";a&&(d=c.json2Str(a),b?c.callCmd({cmd:119,jsonStr:d,callback:b}):c.callCmd({cmd:119,jsonStr:d}))},getRadioStatus:function(a){a?callCmd({cmd:121,callback:a}):callCmd({cmd:121})},getVersion:function(a){this.callCmd({cmd:122,callback:a})},openURL:function(a,b){var c=this,d="";a?(a=c._extend(c.formatURL,a),d=c.json2Str(a),b?c.callCmd({cmd:123,jsonStr:d,callback:b}):c.callCmd({cmd:123,jsonStr:d})):c.callCmd({cmd:123})},getMobileInfo:function(a){this.callCmd({cmd:124,callback:a})},playOrPause:function(a,b){var c=this,d="";a||(a={type:1}),a&&(d=c.json2Str(a),b?c.callCmd({cmd:125,jsonStr:d,callback:b}):c.callCmd({cmd:125,jsonStr:d}))},openTab:function(a,b){var c=this,d="";a?(d=c.json2Str(a),b?c.callCmd({cmd:126,jsonStr:d,callback:b}):c.callCmd({cmd:126,jsonStr:d})):b?c.callCmd({cmd:126,callback:b}):c.callCmd({cmd:126})},clearListAndAddSongs:function(a,b){var g,h,c=this,d=[],e=[],f="";if(a){if(d=a.info,"[object Array]"===Object.prototype.toString.call(d))for(g=0,h=d.length;h>g;g++)e.push(c._extend(c.formatSong,d[g]));a.info=e,f=c.json2Str(a),b?c.callCmd({cmd:127,jsonStr:f,callback:b}):c.callCmd({cmd:127,jsonStr:f})}else b?c.callCmd({cmd:127,callback:b}):c.callCmd({cmd:127})},showHideBar:function(a,b){var c=this,d="";a||(a={state:1}),d=c.json2Str(a),b?c.callCmd({cmd:128,jsonStr:d,callback:b}):c.callCmd({cmd:128,jsonStr:d})},getAcceleration:function(a){var b=this;a&&b.callCmd({cmd:129,callback:a})},getOrientation:function(a){var b=this;a&&b.callCmd({cmd:130,callback:a})},isInClient:function(){var a=this;return a.chkAndroidApp()?a.chkAndroidApp():a.isIOS?a.isIOS:!1},openCamera:function(a,b){var c=this,d="";a||(a={type:1}),a.size&&(a.size={maxWidth:"",minWidth:"",maxHeight:"",minHeight:""}),d=c.json2Str(a),b?c.callCmd({cmd:131,jsonStr:d,callback:b}):c.callCmd({cmd:131,jsonStr:d})},recharge:function(a,b){var c=this,d="";a&&(d=c.json2Str(a),b?c.callCmd({cmd:132,jsonStr:d,callback:b}):c.callCmd({cmd:132,jsonStr:d}))},switchShark:function(a,b){var c=this,d="";a&&(isNaN(parseInt(a.type,10))&&(a.type=0),d=c.json2Str(a),b?c.callCmd({cmd:133,jsonStr:d,callback:b}):c.callCmd({cmd:133,jsonStr:d}))},downloadPrivileges:function(a){var b=this;a&&b.callCmd({cmd:135,callback:a})},getFxUserInfo:function(a){var b=this;a?b.callCmd({cmd:400,callback:a}):b.callCmd({cmd:400})},getKTVUserInfo:function(a){var b=this;a?b.callCmd({cmd:500,callback:a}):b.callCmd({cmd:500})},jumpToKFInnerPage:function(a,b){var c=this,d="";a&&(a.subPageId||(a.subPageId=0),""===a.params&&delete a.params,d=c.json2Str(a),b?c.callCmd({cmd:600,jsonStr:d,callback:b}):c.callCmd({cmd:600,jsonStr:d}))},showMsg:function(a,b){var c=this,d="";a&&(a.msg||(a.msg=""),a.type||(a.type=1),d=c.json2Str(a),b?c.callCmd({cmd:601,jsonStr:d,callback:b}):c.callCmd({cmd:601,jsonStr:d}))},updateTitle:function(a,b){var c=this,d="";a&&(a.title||(a.title=""),d=c.json2Str(a),b?c.callCmd({cmd:602,jsonStr:d,callback:b}):c.callCmd({cmd:602,jsonStr:d}))},rechargeMusic:function(a,b){var c=this,d="";a&&(d=c.json2Str(a),b?c.callCmd({cmd:134,jsonStr:d,callback:b}):c.callCmd({cmd:134,jsonStr:d}))},downloadPrivileges:function(a){var b=this;a&&b.callCmd({cmd:135,callback:a})},vipPage:function(a){var b=this;a&&b.callCmd({cmd:136,callback:a})},woFreeInfo:function(a){var b=this;a&&b.callCmd({cmd:137,callback:a})},openWoFree:function(a,b){var c=this,d="";a&&(d=c.json2Str(a),b?c.callCmd({cmd:138,jsonStr:d,callback:b}):c.callCmd({cmd:138,jsonStr:d}))},getKgCoin:function(a){var b=this;a&&b.callCmd({cmd:139,callback:a})},toClient:function(a){var b=this;a?b.callCmd({cmd:141,callback:a}):b.callCmd({cmd:141})},toPay:function(a,b){var c=this;jsonStr="",a&&(jsonStr=c.json2Str(a),b?c.callCmd({cmd:142,jsonStr:jsonStr,callback:b}):c.callCmd({cmd:142,jsonStr:jsonStr}))}},KgWebMobileCall={userStatus:function(){},pageStatus:function(){},shareStatus:function(){},playStatus:function(){},uploadStatus:function(){},rechargeStatus:function(){},payStatus:function(){}},KgWebToApp={isInstalled:0,ua:navigator.userAgent||"",getHidden:function(){var a;return"undefined"!=typeof document.hidden?a="hidden":"undefined"!=typeof document.mozHidden?a="mozHidden":"undefined"!=typeof document.msHidden?a="msHidden":"undefined"!=typeof document.webkitHidden&&(a="webkitHidden"),KgWebToApp.getHidden=function(){return a},KgWebToApp.getHidden()},str2Json:function(a){var b={};if("string"==typeof a)try{b=JSON.parse(a)}catch(c){b=null}return b},json2Str:function(a){var b="";if("string"!=typeof a)try{b=JSON.stringify(a)}catch(c){b=""}return b},callCmd:function(a){var b=this,c=document,d=navigator.userAgent,e=/android|Adr/gi.test(d),f=/iphone|ipad|ipod/gi.test(d),g="kugou://start.weixin",h="kugouurl://start.weixin",i=null,j=b.getHidden(),m=1500,n=2e3;return e&&(n=1550),e?(i=g,a&&a.protocal&&a.protocal.android&&(i=a.protocal.android)):f&&(i=h,a&&a.protocal&&a.protocal.ios&&(i=a.protocal.ios)),a&&a.cmd&&(i+=a.jsonStr?'?{"cmd": '+a.cmd+', "jsonStr": '+a.jsonStr+"}":'?{"cmd": '+a.cmd+"}"),c.getElementById("mod_debugwin_set")&&(c.getElementById("mod_debugwin_set").innerHTML=i),start=(new Date).valueOf(),i?(location.href=i,setTimeout(function(){document[j]||(end=(new Date).valueOf(),n>end-start&&a&&a.callback&&a.callback())},m),void 0):(a&&a.callback&&a.callback(),void 0)},downSongs:function(a,b){var c=this,d="";a&&(a["320size"]=a["320filesize"]||0,a.m4asize=a.m4afilesize||0,a.timelength=a.duration,a["320hash"]=a["320hash"]||0,d=c.json2Str(a),b?c.callCmd({cmd:301,jsonStr:d,callback:b}):c.callCmd({cmd:301,jsonStr:d}))},jumpPlaylist:function(a,b){var c=this,d="";d=c.json2Str(a),b?c.callCmd({cmd:302,jsonStr:d,callback:b}):c.callCmd({cmd:302,jsonStr:d})},jumpCustomPage:function(a,b){var c=this,d="";d=c.json2Str(a),b?c.callCmd({cmd:303,jsonStr:d,callback:b}):c.callCmd({cmd:303,jsonStr:d})},jumpClientPage:function(a,b){var c=this,d="";d=c.json2Str(a),b?c.callCmd({cmd:304,jsonStr:d,callback:b}):c.callCmd({cmd:304,jsonStr:d})},jumpSingerPage:function(a,b){var c=this,d="";d=c.json2Str(a),b?c.callCmd({cmd:305,jsonStr:d,callback:b}):c.callCmd({cmd:305,jsonStr:d})},jumpRadio:function(a,b){var c=this,d="";d=c.json2Str(a),b?c.callCmd({cmd:306,jsonStr:d,callback:b}):c.callCmd({cmd:306,jsonStr:d})},jumpFM:function(a,b){var c=this,d="";d=c.json2Str(a),b?c.callCmd({cmd:307,jsonStr:d,callback:b}):c.callCmd({cmd:307,jsonStr:d})},jumpMV:function(a,b){var c=this,d="";d=c.json2Str(a),b?c.callCmd({cmd:308,jsonStr:d,callback:b}):c.callCmd({cmd:308,jsonStr:d})},openApp:function(a){var b=this;a?b.callCmd({callback:a}):b.callCmd()}};